# -------------------------------------------------------------------
# Chezmoi configuration template
#
# PURPOSE
# -------
# This file defines user-facing prompts and shared data used by chezmoi templates.
#
# Design principles:
# - This file is version-controlled and lives in the source directory
# - It defines what data is required, not where it is used
# - Values are prompted for once on first apply, then stored locally by chezmoi
# - Local answers are written to: ~/.config/chezmoi/chezmoi.toml
#
# This allows the repo to stay generic and reusable, while keeping
# user-specific values out of version control.
#
# Dotfiles reference these values via templates, for example:
#   "{{" .git_name "}}"
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Chezmoi core configuration
#
# Persist the source directory when using `-S/--source`.
# This is REQUIRED for chezmoi doctor, cd, and apply to work.
# -------------------------------------------------------------------
sourceDir = {{ .chezmoi.config.sourceDir | quote }}

# -------------------------------------------------------------------
# Identity (no defaults)
#
# These values are intentionally prompted for with no defaults.
# They are personal, machine-independent, and should be explicit.
# -------------------------------------------------------------------

{{- $git_name := promptStringOnce . "git_name" "Git name (e.g., Tom Smith)" -}}
{{- $git_email := promptStringOnce . "git_email" "Git email (e.g., tsmith@users.noreply.github.com)" -}}

# -------------------------------------------------------------------
# Device classification
#
# Determines how certain system settings are managed.
# -------------------------------------------------------------------

{{- $is_personal := promptBoolOnce . "is_personal" "Is this a personal computer?" true -}}
{{- $primary_email := promptStringOnce . "primary_email" "Primary email for this device" "" -}}

# -------------------------------------------------------------------
# Preferences (safe defaults)
#
# These values have sensible defaults so pressing Enter is acceptable.
# Users can still override them during the first apply if desired.
# -------------------------------------------------------------------

{{- $editor := promptStringOnce . "editor" "Preferred editor" "nano" -}}

# -------------------------------------------------------------------
# Package installation (opt-out defaults)
#
# Control what gets installed. Defaults to yes for base essentials.
# -------------------------------------------------------------------

{{- $install_base_cli := promptBoolOnce . "install_base_cli" "Install base CLI packages (git, curl, fzf, etc.)" true -}}

# -------------------------------------------------------------------
# Kits (opt-in defaults)
#
# Optional capability layers. Enable what you need.
# -------------------------------------------------------------------

{{- $kits_devtools := promptBoolOnce . "kits.devtools" "Enable devtools kit? (Docker, compilers, dev tools)" false -}}
{{- $kits_macadmin := promptBoolOnce . "kits.macadmin" "Enable macadmin kit? (IT/sysadmin tools)" false -}}
{{- $kits_productivity := promptBoolOnce . "kits.productivity" "Enable productivity kit? (Apps, utilities)" false -}}
{{- $kits_security := promptBoolOnce . "kits.security" "Enable security kit? (VPN, security tools)" false -}}
{{- $kit_fonts := promptBoolOnce . "kits.fonts" "Enable fonts kit? (Design fonts, bonus coding fonts)" false -}}
# -------------------------------------------------------------------
# Data output
# -------------------------------------------------------------------

[data]
  git_name = {{ $git_name | quote }}
  git_email = {{ $git_email | quote }}
  is_personal = {{ $is_personal }}
  primary_email = {{ $primary_email | quote }}
  editor = {{ $editor | quote }}
  install_base_cli = {{ $install_base_cli }}

[data.kits]
  devtools = {{ $kits_devtools }}
  macadmin = {{ $kits_macadmin }}
  productivity = {{ $kits_productivity }}
  security = {{ $kits_security }}
  fonts = {{ $kit_fonts }}
