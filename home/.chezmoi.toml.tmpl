# -------------------------------------------------------------------
# Chezmoi configuration template
#
# PURPOSE
# -------
# This file defines user-facing prompts and shared data used by chezmoi templates.
#
# Design principles:
# - This file is version-controlled and lives in the source directory
# - It defines what data is required, not where it is used
# - Values are prompted for once on first apply, then stored locally by chezmoi
# - Local answers are written to: ~/.config/chezmoi/chezmoi.toml
#
# This allows the repo to stay generic and reusable, while keeping
# user-specific values out of version control.
#
# Dotfiles reference these values via templates, for example:
#   "{{" .git_name "}}"
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Identity (no defaults)
#
# These values are intentionally prompted for with no defaults.
# They are personal, machine-independent, and should be explicit.
# -------------------------------------------------------------------

{{- $git_name        := promptStringOnce . "git_name"        "Git author name       (e.g. James Smith)" -}}
{{- $git_email       := promptStringOnce . "git_email"       "Git author email      (e.g. james@users.noreply.github.com)" -}}
{{- $github_username := promptStringOnce . "github_username" "GitHub username       (for SSH key, leave empty to skip signing)" "" -}}

# -------------------------------------------------------------------
# Device classification
#
# Determines how certain system settings are managed.
# -------------------------------------------------------------------

{{- $is_personal   := promptBoolOnce   . "is_personal"   "Is this a personal computer?      " true -}}

# -------------------------------------------------------------------
# Preferences (safe defaults)
#
# These values have sensible defaults so pressing Enter is acceptable.
# Users can still override them during the first apply if desired.
# -------------------------------------------------------------------

{{- $editor := promptStringOnce . "editor" "Preferred editor                   " "nano" -}}

# -------------------------------------------------------------------
# Package installation (opt-out defaults)
#
# Control what gets installed. Defaults to yes for base essentials.
# -------------------------------------------------------------------

{{- $install_base_cli := promptBoolOnce . "install_base_cli" "Install base CLI packages?         (git, curl, fzf, etc.)" true -}}

# -------------------------------------------------------------------
# Kits (opt-in defaults)
#
# Optional capability layers. Enable what you need.
# -------------------------------------------------------------------

{{- $kits_productivity := promptBoolOnce . "kits.productivity" "Kit: productivity?                 (browsers, communication, tasks)" false -}}
{{- $kits_utilities   := promptBoolOnce . "kits.utilities"   "Kit: utilities?                    (menu bar apps, window management)" false -}}
{{- $kits_security    := promptBoolOnce . "kits.security"    "Kit: security?                     (1Password, secret scanning)" false -}}
{{- $kits_devtools    := promptBoolOnce . "kits.devtools"    "Kit: devtools?                     (editors, containers, terminals)" false -}}
{{- $kits_fonts       := promptBoolOnce . "kits.fonts"       "Kit: fonts?                        (design and coding fonts)" false -}}
{{- $kits_php_dev     := promptBoolOnce . "kits.php_dev"     "Kit: php_dev?                      (PHP, Composer, PhpStorm)" false -}}
{{- $kits_python_dev  := promptBoolOnce . "kits.python_dev"  "Kit: python_dev?                   (Python, pipx, PyCharm)" false -}}
{{- $kits_macadmin    := promptBoolOnce . "kits.macadmin"    "Kit: macadmin?                     (IT/sysadmin tools)" false -}}
{{- $kits_network     := promptBoolOnce . "kits.network"     "Kit: network?                      (network analysis, remote access)" false -}}

# -------------------------------------------------------------------
# Data output
# -------------------------------------------------------------------

[data]
  git_name = {{ $git_name | quote }}
  git_email = {{ $git_email | quote }}
  github_username = {{ $github_username | quote }}
  is_personal = {{ $is_personal }}
  editor = {{ $editor | quote }}
  install_base_cli = {{ $install_base_cli }}

[data.kits]
  productivity = {{ $kits_productivity }}
  utilities = {{ $kits_utilities }}
  security = {{ $kits_security }}
  devtools = {{ $kits_devtools }}
  fonts = {{ $kits_fonts }}
  php_dev = {{ $kits_php_dev }}
  python_dev = {{ $kits_python_dev }}
  macadmin = {{ $kits_macadmin }}
  network = {{ $kits_network }}
